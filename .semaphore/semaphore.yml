version: v1.0
name: Agent
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "Tests"
    task:
      env_vars:
        - name: GO111MODULE
          value: "on"

      prologue:
        commands:
          - sem-version go 1.11
          - checkout
          - go version
          - go get

      jobs:
        - name: Unit Tests
          parallelism: 10
          commands:
            - go run main.go
